<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>量子钻石大侦探</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Babel for compiling JSX in the browser -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700;900&family=Orbitron:wght@400;500;700;900&display=swap');
      
      body {
        font-family: 'Noto Sans SC', sans-serif;
        background-color: #000;
        margin: 0;
        overflow: hidden; /* Prevent body scroll */
      }
      
      .font-display {
        font-family: 'Orbitron', 'Noto Sans SC', sans-serif;
      }

      /* Custom Animations */
      @keyframes flow {
        0% { transform: translateX(-100%); opacity: 0; }
        50% { opacity: 1; }
        100% { transform: translateX(100%); opacity: 0; }
      }

      @keyframes float {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
      }

      @keyframes beam-pulse {
        0%, 100% { opacity: 0.8; box-shadow: 0 0 10px #22c55e, 0 0 20px #22c55e; }
        50% { opacity: 1; box-shadow: 0 0 20px #22c55e, 0 0 40px #22c55e, 0 0 60px #4ade80; }
      }

      @keyframes scanline {
        0% { transform: translateY(-100%); }
        100% { transform: translateY(100%); }
      }

      @keyframes spin-slow {
        from { transform: translate(-50%, -50%) rotate(0deg); }
        to { transform: translate(-50%, -50%) rotate(360deg); }
      }

      .animate-flow {
        animation: flow 1.5s linear infinite;
      }

      .animate-float {
        animation: float 4s ease-in-out infinite;
      }

      .animate-beam {
        animation: beam-pulse 0.1s infinite;
      }
      
      .animate-spin-slow {
        animation: spin-slow 8s linear infinite;
      }
      
      .glass-panel {
        background: rgba(15, 23, 42, 0.6);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .atom-3d {
        background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.4) 0%, rgba(255,255,255,0) 20%), 
                    radial-gradient(circle at 50% 50%, var(--atom-color) 0%, #000 100%);
        box-shadow: inset -5px -5px 10px rgba(0,0,0,0.5), 0 0 15px var(--atom-glow);
      }

      /* Custom Scrollbar for the device screen */
      .custom-scrollbar::-webkit-scrollbar {
        width: 4px;
      }
      .custom-scrollbar::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.05);
      }
      .custom-scrollbar::-webkit-scrollbar-thumb {
        background: rgba(6, 182, 212, 0.3);
        border-radius: 4px;
      }
      .custom-scrollbar::-webkit-scrollbar-thumb:hover {
        background: rgba(6, 182, 212, 0.6);
      }
    </style>

    <!-- Import Map for React and Icons -->
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@18.2.0",
        "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
        "lucide-react": "https://esm.sh/lucide-react@0.263.1"
      }
    }
    </script>
</head>
  <body>
    <div id="root"></div>

    <!-- Main Application Logic -->
    <script type="text/babel" data-type="module">
      import React, { useState, useEffect } from 'react';
      import { createRoot } from 'react-dom/client';
      import { Sparkles, Zap, Microscope, ArrowRight, RotateCcw, Cpu, Activity, Radio, Hexagon } from 'lucide-react';

      // 0. Welcome Screen (欢迎界面)
      const WelcomeScreen = ({ onStart }) => (
        <div className="flex flex-col items-center justify-center h-full text-center space-y-6 md:space-y-8 animate-fade-in relative z-10 p-4">
          <div className="absolute inset-0 bg-gradient-to-b from-purple-500/10 to-transparent pointer-events-none" />
          
          <div className="relative animate-float mt-4">
            <div className="absolute inset-0 bg-cyan-500 blur-[60px] opacity-20 rounded-full animate-pulse"></div>
            <Hexagon size={100} className="text-cyan-400 relative z-10 drop-shadow-[0_0_15px_rgba(34,211,238,0.8)]" strokeWidth={1} />
            <Sparkles size={32} className="text-white absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 animate-spin-slow" />
          </div>

          <div className="space-y-1">
            <h1 className="text-4xl md:text-5xl font-black bg-gradient-to-r from-cyan-400 via-purple-400 to-pink-400 bg-clip-text text-transparent drop-shadow-sm tracking-tight">
              量子大侦探
            </h1>
            <p className="text-cyan-100/70 text-sm font-bold tracking-widest uppercase">
              未来科学 · 科普实验室
            </p>
          </div>

          <div className="glass-panel p-5 md:p-6 rounded-2xl border border-white/10 max-w-xs mx-auto backdrop-blur-md">
            <p className="text-slate-300 mb-6 leading-relaxed text-sm md:text-base text-justify">
              特工你好！我们需要利用<span className="text-cyan-300 font-bold">钻石</span>中的量子缺陷，打造一个能“看见”隐形电流的超级传感器。
            </p>
            
            <button 
              onClick={onStart}
              className="group relative w-full py-3 md:py-4 bg-transparent overflow-hidden rounded-xl border border-cyan-500/50 hover:border-cyan-400 transition-all duration-300 cursor-pointer"
            >
              <div className="absolute inset-0 bg-cyan-500/20 group-hover:bg-cyan-500/40 transition-all duration-300 translate-y-full group-hover:translate-y-0" />
              <span className="relative flex items-center justify-center gap-2 font-bold text-cyan-300 group-hover:text-white text-lg tracking-wider">
                启动任务 <ArrowRight className="w-5 h-5 group-hover:translate-x-1 transition-transform" />
              </span>
            </button>
          </div>
          
          <div className="mt-auto text-xs text-slate-500 font-mono">
             Powered by Quantum Lab
          </div>
        </div>
      );

      // 1. Build NV Center Level (组装 NV 色心)
      const LevelBuildNV = ({ onNext }) => {
        const [grid, setGrid] = useState(Array(9).fill('C'));
        const [step, setStep] = useState('intro'); // intro | placeN | placeV | done

        const handleCellClick = (index) => {
          if (step === 'placeN' && grid[index] === 'C') {
            const newGrid = [...grid];
            newGrid[index] = 'N';
            setGrid(newGrid);
            setStep('placeV');
          } else if (step === 'placeV' && grid[index] === 'C') {
            const newGrid = [...grid];
            newGrid[index] = 'V';
            setGrid(newGrid);
            setStep('done');
          }
        };

        return (
          <div className="w-full h-full flex flex-col items-center py-2 relative overflow-hidden">
            <div className="text-center space-y-2 z-10 mb-4 shrink-0">
              <h2 className="text-2xl md:text-3xl font-bold text-cyan-400 uppercase tracking-widest drop-shadow-[0_0_10px_rgba(34,211,238,0.5)]">
                纳米核心组装
              </h2>
              <div className="glass-panel px-4 py-2 rounded-full inline-block border-cyan-500/30">
                <p className="text-cyan-100 text-xs md:text-sm font-medium">
                  {step === 'intro' && <span className="animate-pulse">正在初始化晶格结构...</span>}
                  {step === 'placeN' && "请点击一个 碳原子(C) 将其替换为 氮原子(N)"}
                  {step === 'placeV' && "请移除一个相邻原子，制造 空位(V)"}
                  {step === 'done' && <span className="text-green-400 font-bold">NV 色心合成成功！</span>}
                </p>
              </div>
            </div>

            <div className="relative p-4 md:p-8 perspective-1000 flex-1 flex items-center justify-center w-full max-h-[400px]">
              {step === 'intro' && (
                   <button 
                   onClick={() => setStep('placeN')}
                   className="absolute inset-0 z-20 flex items-center justify-center bg-black/60 backdrop-blur-sm rounded-3xl cursor-pointer"
                 >
                   <div className="bg-cyan-600 hover:bg-cyan-500 text-white px-8 py-3 rounded-xl font-bold shadow-[0_0_20px_rgba(8,145,178,0.6)] hover:scale-105 transition-transform flex items-center gap-2">
                     开始组装 <Cpu size={18}/>
                   </div>
                 </button>
              )}
           
              <div className="grid grid-cols-3 gap-3 md:gap-6 p-4 md:p-6 bg-slate-900/80 rounded-3xl border border-slate-700 shadow-2xl relative">
                {/* Connecting Lines (Background decoration) */}
                <div className="absolute inset-0 pointer-events-none opacity-20">
                   <div className="absolute top-1/2 left-0 w-full h-1 bg-slate-400"></div>
                   <div className="absolute left-1/2 top-0 h-full w-1 bg-slate-400"></div>
                </div>

                {grid.map((atom, i) => {
                   // Determine style based on atom type
                   let colorVar = '--atom-color: #64748b; --atom-glow: rgba(148,163,184,0);'; // Carbon (Gray)
                   if (atom === 'N') colorVar = '--atom-color: #3b82f6; --atom-glow: rgba(59,130,246,0.8);'; // Nitrogen (Blue)
                   if (atom === 'V') colorVar = '--atom-color: #000000; --atom-glow: rgba(255,255,255,0.2);'; // Vacancy (Void)

                   return (
                    <button
                      key={i}
                      onClick={() => handleCellClick(i)}
                      disabled={step === 'done' || step === 'intro' || atom !== 'C'}
                      style={atom !== 'V' ? { padding: '2px', ...({ [colorVar.split(':')[0].trim()]: colorVar.split(':')[1].trim() }) } : {}}
                      className={`
                        w-14 h-14 md:w-20 md:h-20 rounded-full flex items-center justify-center text-xl md:text-2xl font-black transition-all duration-500 relative group
                        ${atom === 'C' && step !== 'intro' && step !== 'done' ? 'hover:scale-110 cursor-pointer' : 'cursor-default'}
                        ${atom === 'V' ? 'border-2 border-dashed border-white/30 bg-black/50' : 'atom-3d text-white/90'}
                      `}
                    >
                       <style>{`.atom-${i} { ${colorVar} }`}</style>
                       <div className={`w-full h-full rounded-full flex items-center justify-center atom-${i} ${atom !== 'V' ? 'atom-3d' : ''}`}>
                          {atom === 'V' ? '' : atom}
                       </div>
                       {/* Selection Ring */}
                       {atom === 'C' && step !== 'intro' && step !== 'done' && (
                          <div className="absolute inset-0 rounded-full border-2 border-cyan-400 opacity-0 group-hover:opacity-100 group-hover:scale-125 transition-all duration-300"></div>
                       )}
                    </button>
                  );
                })}
              </div>
            </div>

            <div className="h-16 flex items-center justify-center w-full mt-4 shrink-0">
              {step === 'done' && (
                <button 
                  onClick={onNext}
                  className="flex items-center gap-3 bg-emerald-500 hover:bg-emerald-400 text-black px-8 py-3 rounded-xl font-bold shadow-[0_0_30px_rgba(16,185,129,0.4)] animate-bounce cursor-pointer"
                >
                  传感器就绪 <ArrowRight className="w-5 h-5" />
                </button>
              )}
            </div>
          </div>
        );
      };

      // 2. Laser Excitation Level (激光激发)
      const LevelLaser = ({ onNext }) => {
        const [laserActive, setLaserActive] = useState(false);

        return (
          <div className="w-full h-full flex flex-col items-center justify-between py-4">
            <div className="text-center z-10 space-y-1 shrink-0">
              <h2 className="text-2xl md:text-3xl font-bold text-emerald-400 uppercase tracking-widest drop-shadow-[0_0_10px_rgba(52,211,153,0.5)]">
                能量注入
              </h2>
              <p className="text-emerald-100/70 text-xs md:text-sm">瞄准钻石发射激光，激发内部电子。</p>
            </div>

            <div className="relative w-full flex-1 flex items-center justify-center my-4 min-h-[250px]">
              {/* Lab Table Grid */}
              <div className="absolute inset-0 bg-[linear-gradient(rgba(0,255,255,0.05)_1px,transparent_1px),linear-gradient(90deg,rgba(0,255,255,0.05)_1px,transparent_1px)] bg-[size:30px_30px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_80%)]"></div>

              {/* Laser Emitter */}
              <div className="absolute left-0 md:left-4 h-12 md:h-16 w-16 md:w-24 bg-slate-800 rounded-r-lg border-y border-r border-slate-600 flex items-center shadow-xl z-20">
                <div className={`w-3 h-3 rounded-full bg-emerald-500 ml-auto mr-2 ${laserActive ? 'animate-pulse shadow-[0_0_10px_#10b981]' : 'opacity-30'}`}></div>
              </div>

              {/* The Laser Beam */}
              <div 
                className={`absolute left-[calc(16px+2.5rem)] md:left-[calc(10px+6rem)] right-1/2 h-1 md:h-2 bg-emerald-400 z-10 transition-opacity duration-100 origin-left
                  ${laserActive ? 'opacity-100 animate-beam' : 'opacity-0'}
                `}
              ></div>

              {/* The Diamond */}
              <div className="relative z-20 group scale-90 md:scale-100">
                {/* Glow effect behind diamond */}
                <div className={`absolute inset-0 bg-red-600 blur-[40px] transition-opacity duration-300 ${laserActive ? 'opacity-80' : 'opacity-0'}`}></div>
                
                {/* Diamond Shape */}
                <div className={`
                   w-28 h-28 md:w-32 md:h-32 bg-gradient-to-br from-slate-700 to-slate-900 clip-diamond flex items-center justify-center relative transition-all duration-300 border-2 border-slate-500
                   ${laserActive ? 'shadow-[0_0_50px_rgba(220,38,38,0.5)] border-red-500/50' : ''}
                `}
                style={{ clipPath: 'polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%)' }}
                >
                   {/* NV Center Inside */}
                   <div className="flex -space-x-1 scale-75">
                      <div className="w-8 h-8 rounded-full bg-blue-600 shadow-inner flex items-center justify-center text-[10px] text-white font-bold border border-blue-400">N</div>
                      <div className="w-8 h-8 rounded-full bg-black border border-white/40 flex items-center justify-center text-[10px] text-white/50 font-bold">V</div>
                   </div>
                   
                   {/* Emitted Photons (Red Fluorescence) */}
                   {laserActive && (
                     <>
                       <div className="absolute inset-0 border-2 border-red-500/50 animate-ping opacity-50" style={{ clipPath: 'polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%)' }}></div>
                       <div className="absolute -right-20 top-0 text-red-500 font-bold text-sm animate-bounce">
                         荧光反应!
                       </div>
                     </>
                   )}
                </div>
              </div>
            </div>

            <div className="glass-panel p-4 md:p-6 rounded-2xl w-full max-w-sm border border-slate-700 shrink-0">
              <div className="flex flex-col gap-4">
                <button
                  className={`
                    w-full py-4 md:py-6 rounded-xl font-display font-bold text-lg md:text-xl tracking-wider transition-all duration-200 active:scale-95 border cursor-pointer
                    ${laserActive 
                      ? 'bg-emerald-500/20 text-emerald-300 border-emerald-500 shadow-[0_0_30px_rgba(16,185,129,0.3)]' 
                      : 'bg-slate-800 text-slate-400 border-slate-600 hover:bg-slate-700'}
                  `}
                  onMouseDown={() => setLaserActive(true)}
                  onMouseUp={() => setLaserActive(false)}
                  onTouchStart={() => setLaserActive(true)}
                  onTouchEnd={() => setLaserActive(false)}
                >
                  <div className="flex items-center justify-center gap-3">
                    <Zap className={laserActive ? 'fill-emerald-300' : ''} />
                    {laserActive ? '激光发射中...' : '长按发射激光'}
                  </div>
                </button>

                {laserActive && (
                   <button onClick={onNext} className="animate-fade-in w-full py-3 bg-purple-600 hover:bg-purple-500 text-white rounded-lg font-bold flex items-center justify-center gap-2 shadow-lg cursor-pointer">
                     分析光信号 <ArrowRight size={18} />
                   </button>
                )}
              </div>
            </div>
          </div>
        );
      };

      // 3. Sensing Level (Dashboard) (量子传感看板)
      const LevelSensing = ({ onRestart }) => {
        const [current, setCurrent] = useState(50);
        
        // Physics simulation logic
        const fluorescence = 100 - (current * 0.7); 
        const fieldStrength = current * 0.1; // Tesla (arbitrary scale)

        return (
          <div className="w-full h-full flex flex-col space-y-3 md:space-y-4">
            <div className="flex justify-between items-end border-b border-cyan-500/30 pb-2 shrink-0">
               <div>
                  <h2 className="text-xl md:text-2xl font-bold text-cyan-400">量子传感看板</h2>
                  <p className="text-[10px] text-cyan-200/50 uppercase tracking-widest">实时数据流 • 量子探测器</p>
               </div>
               <div className="flex items-center gap-2 text-emerald-400 animate-pulse">
                  <div className="w-2 h-2 rounded-full bg-emerald-400"></div>
                  <span className="text-xs font-mono font-bold">ONLINE</span>
               </div>
            </div>

            {/* Main Visualization Area */}
            <div className="flex-1 relative bg-black rounded-xl border border-slate-700 overflow-hidden flex flex-col shadow-inner min-h-[200px]">
              {/* Grid Background */}
              <div className="absolute inset-0 opacity-20" style={{ 
                backgroundImage: 'linear-gradient(#333 1px, transparent 1px), linear-gradient(90deg, #333 1px, transparent 1px)', 
                backgroundSize: '20px 20px' 
              }}></div>

              {/* Magnetic Field Visualization */}
              <div className="absolute inset-0 flex items-center justify-center pointer-events-none">
                 {/* Dynamic Field Rings */}
                 {[1, 2, 3].map(i => (
                   <div 
                     key={i}
                     className="absolute rounded-full border border-purple-500/30 transition-all duration-300"
                     style={{
                       width: `${100 + (current * i * 0.8)}px`,
                       height: `${100 + (current * i * 0.8)}px`,
                       opacity: current > 5 ? 0.3 + (current/200) : 0,
                       borderWidth: `${1 + current/20}px`
                     }}
                   />
                 ))}
                 
                 {/* Center Sensor */}
                 <div className="relative z-10 w-14 h-14 bg-slate-800 rounded-lg border border-slate-600 flex items-center justify-center">
                    <div 
                      className="w-full h-full absolute rounded-lg transition-all duration-100 opacity-50 blur-md"
                      style={{ backgroundColor: `rgba(255, 50, 50, ${fluorescence/100})` }}
                    ></div>
                    <div className="relative z-10 text-[10px] font-mono text-white/70">NV核心</div>
                 </div>
              </div>

              {/* Wire Simulation at Bottom */}
              <div className="mt-auto h-10 md:h-12 bg-slate-900 border-t border-slate-700 relative flex items-center">
                 <div className="absolute left-2 text-[10px] text-slate-500 font-mono">铜导线</div>
                 {/* Moving Electrons */}
                 <div className="w-full h-2 bg-slate-800 relative overflow-hidden mx-12 rounded-full">
                    {current > 0 && Array.from({ length: 8 }).map((_, i) => (
                      <div 
                        key={i}
                        className="absolute top-1/2 -translate-y-1/2 w-3 h-1 bg-yellow-400 rounded-full shadow-[0_0_5px_yellow]"
                        style={{
                          left: `${i * 15}%`,
                          animation: `flow ${200/(current+1)}s linear infinite` // Faster current = faster animation
                        }}
                      />
                    ))}
                 </div>
              </div>
            </div>

            {/* Control Panel */}
            <div className="glass-panel p-3 md:p-4 rounded-xl border border-slate-600 space-y-3 shrink-0">
               
               {/* Input Slider */}
               <div className="space-y-2">
                  <div className="flex justify-between font-mono text-xs md:text-sm">
                     <span className="text-yellow-400 flex items-center"><Zap size={14} className="mr-1"/> 输入电流</span>
                     <span className="text-white bg-slate-800 px-2 rounded">{current} A</span>
                  </div>
                  <input 
                    type="range" 
                    min="0" 
                    max="100" 
                    value={current} 
                    onChange={(e) => setCurrent(parseInt(e.target.value))}
                    className="w-full h-2 bg-slate-800 rounded-lg appearance-none cursor-pointer accent-yellow-400 hover:accent-yellow-300 focus:outline-none focus:ring-2 focus:ring-yellow-400/50"
                  />
               </div>

               {/* Readings Grid */}
               <div className="grid grid-cols-2 gap-3">
                  <div className="bg-slate-900/80 p-2 md:p-3 rounded-lg border border-slate-700">
                     <div className="text-[10px] text-slate-400 font-mono mb-1">磁场强度 (B)</div>
                     <div className="text-lg md:text-xl font-display font-bold text-purple-400 flex items-center gap-2">
                       <Activity size={18} /> {fieldStrength.toFixed(1)} <span className="text-xs opacity-50">mT</span>
                     </div>
                  </div>
                  <div className="bg-slate-900/80 p-2 md:p-3 rounded-lg border border-slate-700 relative overflow-hidden">
                     <div className="text-[10px] text-slate-400 font-mono mb-1">光学读数 (红光)</div>
                     {/* Bar graph visualization */}
                     <div className="absolute right-0 top-0 bottom-0 bg-red-900/20 transition-all duration-300" style={{ width: `${fluorescence}%` }}></div>
                     <div className="text-lg md:text-xl font-display font-bold text-red-400 relative z-10 flex items-center gap-2">
                       <Radio size={18} /> {Math.floor(fluorescence)}%
                     </div>
                  </div>
               </div>
            </div>

            <div className="bg-cyan-900/20 border border-cyan-500/20 p-3 rounded-lg flex gap-3 items-start shrink-0">
               <div className="mt-1 text-cyan-400"><Microscope size={16} /></div>
               <p className="text-xs text-cyan-100/80 leading-relaxed text-justify">
                  <strong className="text-cyan-300">侦探笔记：</strong> 电流产生磁场，磁场干扰了钻石内的量子自旋，导致红光变暗。电脑分析变暗程度，算出电流大小。
               </p>
            </div>

            <button onClick={onRestart} className="w-full py-2 flex items-center justify-center gap-2 text-slate-500 hover:text-white transition-colors text-sm font-bold uppercase tracking-widest shrink-0 cursor-pointer">
              <RotateCcw size={14} /> 重置模拟
            </button>
          </div>
        );
      };

      // --- Main App ---
      const App = () => {
        const [level, setLevel] = useState(0);

        const renderLevel = () => {
          switch(level) {
            case 0: return <WelcomeScreen onStart={() => setLevel(1)} />;
            case 1: return <LevelBuildNV onNext={() => setLevel(2)} />;
            case 2: return <LevelLaser onNext={() => setLevel(3)} />;
            case 3: return <LevelSensing onRestart={() => setLevel(0)} />;
            default: return <WelcomeScreen onStart={() => setLevel(1)} />;
          }
        };

        const steps = [
          { id: 1, name: '组装', icon: Hexagon },
          { id: 2, name: '激发', icon: Zap },
          { id: 3, name: '传感', icon: Activity },
        ];

        return (
          <div className="min-h-screen bg-slate-950 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-slate-900 via-[#0a0a0a] to-black text-white font-sans selection:bg-cyan-500 selection:text-black flex flex-col items-center justify-center p-2 sm:p-4 overflow-hidden relative">
            
            {/* Background Grid Mesh */}
            <div className="absolute inset-0 bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:24px_24px] pointer-events-none"></div>

            {/* Main Container - The "Device" */}
            <div className="w-full max-w-md h-[90vh] max-h-[850px] min-h-[550px] glass-panel rounded-[2rem] shadow-2xl overflow-hidden border border-white/10 relative flex flex-col backdrop-blur-xl transition-all duration-300">
              
              {/* Top Status Bar (Decoration) */}
              <div className="h-8 bg-black/40 flex justify-between items-center px-4 md:px-6 py-2 border-b border-white/5 shrink-0">
                 <div className="flex gap-1.5">
                   <div className="w-2.5 h-2.5 rounded-full bg-red-500/80"></div>
                   <div className="w-2.5 h-2.5 rounded-full bg-yellow-500/80"></div>
                   <div className="w-2.5 h-2.5 rounded-full bg-green-500/80"></div>
                 </div>
                 <div className="font-mono text-[10px] text-cyan-500/60 font-bold tracking-wider">QUANTUM OS v2.4</div>
              </div>

              {/* Progress Stepper */}
              {level > 0 && (
                <div className="flex justify-between px-6 md:px-8 py-4 relative z-20 shrink-0">
                  {/* Connecting Line */}
                  <div className="absolute top-1/2 left-8 right-8 h-0.5 bg-slate-800 -z-10 -translate-y-1/2"></div>
                  
                  {steps.map((step) => {
                     const isActive = level >= step.id;
                     const isCurrent = level === step.id;
                     const Icon = step.icon;
                     
                     return (
                      <div key={step.id} className="flex flex-col items-center gap-1.5">
                        <div 
                          className={`
                            w-8 h-8 md:w-10 md:h-10 rounded-full flex items-center justify-center border-2 transition-all duration-500 relative bg-slate-900
                            ${isActive ? 'border-cyan-500 text-cyan-400 shadow-[0_0_15px_rgba(6,182,212,0.5)]' : 'border-slate-700 text-slate-600'}
                            ${isCurrent ? 'scale-110' : ''}
                          `}
                        >
                          <Icon size={16} className={isCurrent ? "animate-pulse" : ""} />
                        </div>
                        <span className={`text-[10px] font-bold uppercase tracking-wider ${isActive ? 'text-cyan-400' : 'text-slate-600'}`}>
                          {step.name}
                        </span>
                      </div>
                    );
                  })}
                </div>
              )}

              {/* Game Content Area */}
              <div className="flex-1 p-4 md:p-6 flex flex-col relative z-10 overflow-y-auto custom-scrollbar">
                {renderLevel()}
              </div>
              
              {/* Bottom Decorative Footer */}
              <div className="h-1 bg-gradient-to-r from-cyan-500 via-purple-500 to-pink-500 w-full opacity-50 shrink-0"></div>
            </div>
            
            <p className="mt-4 text-slate-600 text-[10px] md:text-xs font-mono tracking-widest flex items-center gap-2 opacity-50 hover:opacity-100 transition-opacity cursor-default uppercase">
              <Cpu size={12} /> 量子科普模块
            </p>
          </div>
        );
      };

      const root = createRoot(document.getElementById('root'));
      root.render(<App />);
    </script>
  </body>
</html>
